#include <Rendering/OpenGL/Resource/Texture/OpenGLTexture.h>


const GLuint Miracle::OpenGLTexture::OpenGLTextureInternalFormat[DataFormat::NUM_DIRECTX_FORMATS]
{
	0,						// MENGINE_UNKNOWN
	0,						// MENGINE_R32G32B32A32_TYPELESS
	GL_RGBA32F,				// MENGINE_R32G32B32A32_FLOAT
	GL_RGBA32UI,			// MENGINE_R32G32B32A32_UINT
	GL_RGBA32I,				// MENGINE_R32G32B32A32_SINT
	0,						// MENGINE_R32G32B32_TYPELESS
	GL_RGB32F,				// MENGINE_R32G32B32_FLOAT
	GL_RGB32UI,				// MENGINE_R32G32B32_UINT
	GL_RGB32I,				// MENGINE_R32G32B32_SINT
	0,						// MENGINE_R16G16B16A16_TYPELESS
	GL_RGBA16F,				// MENGINE_R16G16B16A16_FLOAT
	GL_RGBA16,				// MENGINE_R16G16B16A16_UNORM
	GL_RGBA16UI,			// MENGINE_R16G16B16A16_UINT
	GL_RGBA16_SNORM,		// MENGINE_R16G16B16A16_SNORM
	GL_RGBA16I,				// MENGINE_R16G16B16A16_SINT
	0,						// MENGINE_R32G32_TYPELESS
	GL_RG32F,				// MENGINE_R32G32_FLOAT
	GL_RG32UI,				// MENGINE_R32G32_UINT
	GL_RG32I,				// MENGINE_R32G32_SINT
	0,						// MENGINE_R32G8X24_TYPELESS
	0,						// MENGINE_D32_FLOAT_S8X24_UINT
	0,						// MENGINE_R32_FLOAT_X8X24_TYPELESS
	0,						// MENGINE_X32_TYPELESS_G8X24_UINT
	0,						// MENGINE_R10G10B10A2_TYPELESS
	0,						// MENGINE_R10G10B10A2_UNORM
	0,						// MENGINE_R10G10B10A2_UINT
	GL_R11F_G11F_B10F,		// MENGINE_R11G11B10_FLOAT
	0,						// MENGINE_R8G8B8A8_TYPELESS
	GL_RGBA8,				// MENGINE_R8G8B8A8_UNORM
	GL_RGBA8,				// MENGINE_R8G8B8A8_UNORM_SRGB
	GL_RGBA8UI,				// MENGINE_R8G8B8A8_UINT
	GL_RGBA8_SNORM,			// MENGINE_R8G8B8A8_SNORM
	GL_RGBA8I,				// MENGINE_R8G8B8A8_SINT
	0,						// MENGINE_R16G16_TYPELESS
	GL_RG16F,				// MENGINE_R16G16_FLOAT
	GL_RG16,				// MENGINE_R16G16_UNORM
	GL_RG16UI,				// MENGINE_R16G16_UINT
	GL_R16_SNORM,			// MENGINE_R16G16_SNORM
	GL_R16I,				// MENGINE_R16G16_SINT
	0,						// MENGINE_R32_TYPELESS
	GL_DEPTH_COMPONENT32F,  // MENGINE_D32_FLOAT
	GL_R32F,				// MENGINE_R32_FLOAT
	GL_R32UI,				// MENGINE_R32_UINT
	GL_R32I,				// MENGINE_R32_SINT
	0,						// MENGINE_R24G8_TYPELESS
	GL_DEPTH24_STENCIL8,	// MENGINE_D24_UNORM_S8_UINT
	0,						// MENGINE_R24_UNORM_X8_TYPELESS
	0,						// MENGINE_X24_TYPELESS_G8_UINT
	0,						// MENGINE_R8G8_TYPELESS
	GL_RG8,					// MENGINE_R8G8_UNORM
	GL_RG8UI,				// MENGINE_R8G8_UINT
	GL_RG8_SNORM,			// MENGINE_R8G8_SNORM
	GL_RG8I,				// MENGINE_R8G8_SINT
	0,						// MENGINE_R16_TYPELESS
	GL_R16F,				// MENGINE_R16_FLOAT
	GL_DEPTH_COMPONENT16,	// MENGINE_D16_UNORM
	GL_R16,					// MENGINE_R16_UNORM
	GL_R16UI,				// MENGINE_R16_UINT
	GL_R16_SNORM,			// MENGINE_R16_SNORM
	GL_R16I,				// MENGINE_R16_SINT
	0,						// MENGINE_R8_TYPELESS
	GL_R8,					// MENGINE_R8_UNORM
	GL_R8UI,				// MENGINE_R8_UINT
	GL_R8_SNORM,			// MENGINE_R8_SNORM
	GL_R8I,					// MENGINE_R8_SINT
	0,						// MENGINE_A8_UNORM
	0,						// MENGINE_R1_UNORM
	GL_RGB9_E5,				// MENGINE_R9G9B9E5_SHAREDEXP
	0,						// MENGINE_R8G8_B8G8_UNORM
	0,						// MENGINE_G8R8_G8B8_UNORM
	0,						// MENGINE_BC1_TYPELESS
	0,						// MENGINE_BC1_UNORM
	0,						// MENGINE_BC1_UNORM_SRGB
	0,						// MENGINE_BC2_TYPELESS
	0,						// MENGINE_BC2_UNORM
	0,						// MENGINE_BC2_UNORM_SRGB
	0,						// MENGINE_BC3_TYPELESS
	0,						// MENGINE_BC3_UNORM
	0,						// MENGINE_BC3_UNORM_SRGB
	0,						// MENGINE_BC4_TYPELESS
	0,						// MENGINE_BC4_UNORM
	0,						// MENGINE_BC4_SNORM
	0,						// MENGINE_BC5_TYPELESS
	0,						// MENGINE_BC5_UNORM
	0,						// MENGINE_BC5_SNORM
	GL_RGB565,				// MENGINE_B5G6R5_UNORM
	GL_RGB5_A1,				// MENGINE_B5G5R5A1_UNORM
	GL_RGBA8,				// MENGINE_B8G8R8A8_UNORM
	GL_RGBA8,				// MENGINE_B8G8R8X8_UNORM
	GL_RGB10_A2,			// MENGINE_R10G10B10_XR_BIAS_A2_UNORM
	0,						// MENGINE_B8G8R8A8_TYPELESS
	GL_RGBA8,				// MENGINE_B8G8R8A8_UNORM_SRGB
	0,						// MENGINE_B8G8R8X8_TYPELESS
	GL_RGBA8,				// MENGINE_B8G8R8X8_UNORM_SRGB
	0,						// MENGINE_BC6H_TYPELESS
	0,						// MENGINE_BC6H_UF16
	0,						// MENGINE_BC6H_SF16
	0,						// MENGINE_BC7_TYPELESS
	0,						// MENGINE_BC7_UNORM
	0,						// MENGINE_BC7_UNORM_SRGB
	0,						// MENGINE_AYUV
	0,						// MENGINE_Y410
	0,						// MENGINE_Y416
	0,						// MENGINE_NV12
	0,						// MENGINE_P010
	0,						// MENGINE_P016
	0,						// MENGINE_420_OPAQUE
	0,						// MENGINE_YUY2
	0,						// MENGINE_Y210
	0,						// MENGINE_Y216
	0,						// MENGINE_NV11
	0,						// MENGINE_AI44
	0,						// MENGINE_IA44
	0,						// MENGINE_P8
	0,						// MENGINE_A8P8
	0						// MENGINE_B4G4R4A4_UNORM
};

const GLuint Miracle::OpenGLTexture::OpenGLTextureExternalFormat[DataFormat::NUM_DIRECTX_FORMATS]
{
	0,						// MENGINE_UNKNOWN
	GL_RGBA,				// MENGINE_R32G32B32A32_TYPELESS
	GL_RGBA,				// MENGINE_R32G32B32A32_FLOAT
	GL_RGBA_INTEGER,		// MENGINE_R32G32B32A32_UINT
	GL_RGBA_INTEGER,		// MENGINE_R32G32B32A32_SINT
	GL_RGB,					// MENGINE_R32G32B32_TYPELESS
	GL_RGB,					// MENGINE_R32G32B32_FLOAT
	GL_RGB_INTEGER,			// MENGINE_R32G32B32_UINT
	GL_RGB_INTEGER,			// MENGINE_R32G32B32_SINT
	GL_RGBA,				// MENGINE_R16G16B16A16_TYPELESS
	GL_RGBA,				// MENGINE_R16G16B16A16_FLOAT
	GL_RGBA,				// MENGINE_R16G16B16A16_UNORM
	GL_RGBA_INTEGER,		// MENGINE_R16G16B16A16_UINT
	GL_RGBA,				// MENGINE_R16G16B16A16_SNORM
	GL_RGBA_INTEGER,		// MENGINE_R16G16B16A16_SINT
	GL_RG,					// MENGINE_R32G32_TYPELESS
	GL_RG,					// MENGINE_R32G32_FLOAT
	GL_RG_INTEGER,			// MENGINE_R32G32_UINT
	GL_RG_INTEGER,			// MENGINE_R32G32_SINT
	0,						// MENGINE_R32G8X24_TYPELESS
	0,						// MENGINE_D32_FLOAT_S8X24_UINT
	0,						// MENGINE_R32_FLOAT_X8X24_TYPELESS
	0,						// MENGINE_X32_TYPELESS_G8X24_UINT
	GL_RGBA,				// MENGINE_R10G10B10A2_TYPELESS
	GL_RGBA,				// MENGINE_R10G10B10A2_UNORM
	GL_RGBA_INTEGER,		// MENGINE_R10G10B10A2_UINT
	GL_RGB,					// MENGINE_R11G11B10_FLOAT
	GL_RGBA,				// MENGINE_R8G8B8A8_TYPELESS
	GL_RGBA,				// MENGINE_R8G8B8A8_UNORM
	GL_RGBA,				// MENGINE_R8G8B8A8_UNORM_SRGB
	GL_RGBA_INTEGER,		// MENGINE_R8G8B8A8_UINT
	GL_RGBA,				// MENGINE_R8G8B8A8_SNORM
	GL_RGBA_INTEGER,		// MENGINE_R8G8B8A8_SINT
	GL_RG,					// MENGINE_R16G16_TYPELESS
	GL_RG,					// MENGINE_R16G16_FLOAT
	GL_RG,					// MENGINE_R16G16_UNORM
	GL_RG_INTEGER,			// MENGINE_R16G16_UINT
	GL_RG,					// MENGINE_R16G16_SNORM
	GL_RG_INTEGER,			// MENGINE_R16G16_SINT
	GL_RED,					// MENGINE_R32_TYPELESS
	GL_DEPTH_COMPONENT,		// MENGINE_D32_FLOAT
	GL_RED,					// MENGINE_R32_FLOAT
	GL_RED_INTEGER,			// MENGINE_R32_UINT
	GL_RED_INTEGER,			// MENGINE_R32_SINT
	GL_RG,					// MENGINE_R24G8_TYPELESS
	GL_DEPTH_COMPONENT,		// MENGINE_D24_UNORM_S8_UINT
	0,						// MENGINE_R24_UNORM_X8_TYPELESS
	0,						// MENGINE_X24_TYPELESS_G8_UINT
	GL_RG,					// MENGINE_R8G8_TYPELESS
	GL_RG,					// MENGINE_R8G8_UNORM
	GL_RG_INTEGER,			// MENGINE_R8G8_UINT
	GL_RG,					// MENGINE_R8G8_SNORM
	GL_RG_INTEGER,			// MENGINE_R8G8_SINT
	GL_RED,					// MENGINE_R16_TYPELESS
	GL_RED,					// MENGINE_R16_FLOAT
	GL_DEPTH_COMPONENT,		// MENGINE_D16_UNORM
	GL_RED,					// MENGINE_R16_UNORM
	GL_RED_INTEGER,			// MENGINE_R16_UINT
	GL_RED,					// MENGINE_R16_SNORM
	GL_RED_INTEGER,			// MENGINE_R16_SINT
	GL_RED,					// MENGINE_R8_TYPELESS
	GL_RED,					// MENGINE_R8_UNORM
	GL_RED_INTEGER,			// MENGINE_R8_UINT
	GL_RED,					// MENGINE_R8_SNORM
	GL_RED_INTEGER,			// MENGINE_R8_SINT
	0,						// MENGINE_A8_UNORM
	0,						// MENGINE_R1_UNORM
	0,						// MENGINE_R9G9B9E5_SHAREDEXP
	0,						// MENGINE_R8G8_B8G8_UNORM
	0,						// MENGINE_G8R8_G8B8_UNORM
	0,						// MENGINE_BC1_TYPELESS
	0,						// MENGINE_BC1_UNORM
	0,						// MENGINE_BC1_UNORM_SRGB
	0,						// MENGINE_BC2_TYPELESS
	0,						// MENGINE_BC2_UNORM
	0,						// MENGINE_BC2_UNORM_SRGB
	0,						// MENGINE_BC3_TYPELESS
	0,						// MENGINE_BC3_UNORM
	0,						// MENGINE_BC3_UNORM_SRGB
	0,						// MENGINE_BC4_TYPELESS
	0,						// MENGINE_BC4_UNORM
	0,						// MENGINE_BC4_SNORM
	0,						// MENGINE_BC5_TYPELESS
	0,						// MENGINE_BC5_UNORM
	0,						// MENGINE_BC5_SNORM
	GL_BGR,					// MENGINE_B5G6R5_UNORM
	GL_BGRA,				// MENGINE_B5G5R5A1_UNORM
	GL_BGRA,				// MENGINE_B8G8R8A8_UNORM
	GL_BGRA,				// MENGINE_B8G8R8X8_UNORM
	0,						// MENGINE_R10G10B10_XR_BIAS_A2_UNORM
	GL_BGRA,				// MENGINE_B8G8R8A8_TYPELESS
	GL_BGRA,				// MENGINE_B8G8R8A8_UNORM_SRGB
	GL_BGRA,				// MENGINE_B8G8R8X8_TYPELESS
	GL_BGRA,				// MENGINE_B8G8R8X8_UNORM_SRGB
	0,						// MENGINE_BC6H_TYPELESS
	0,						// MENGINE_BC6H_UF16
	0,						// MENGINE_BC6H_SF16
	0,						// MENGINE_BC7_TYPELESS
	0,						// MENGINE_BC7_UNORM
	0,						// MENGINE_BC7_UNORM_SRGB
	0,						// MENGINE_AYUV
	0,						// MENGINE_Y410
	0,						// MENGINE_Y416
	0,						// MENGINE_NV12
	0,						// MENGINE_P010
	0,						// MENGINE_P016
	0,						// MENGINE_420_OPAQUE
	0,						// MENGINE_YUY2
	0,						// MENGINE_Y210
	0,						// MENGINE_Y216
	0,						// MENGINE_NV11
	0,						// MENGINE_AI44
	0,						// MENGINE_IA44
	0,						// MENGINE_P8
	0,						// MENGINE_A8P8
	0						// MENGINE_B4G4R4A4_UNORM
};

const GLuint Miracle::OpenGLTexture::OpenGLTextureExternalType[MiracleChannels::NUM_CHANNELS] =
{
	GL_ZERO,                        // MENGINE_UNSUPPORTED
	GL_BYTE,                        // MENGINE_BYTE
	GL_UNSIGNED_BYTE,               // MENGINE_UBYTE
	GL_SHORT,                       // MENGINE_SHORT
	GL_UNSIGNED_SHORT,              // MENGINE_USHORT
	GL_INT,                         // MENGINE_INT
	GL_UNSIGNED_INT,                // MENGINE_UINT
	GL_HALF_FLOAT,                  // MENGINE_HALF_FLOAT
	GL_FLOAT,                       // MENGINE_FLOAT
	GL_DOUBLE,                      // MENGINE_DOUBLE
	GL_INT_2_10_10_10_REV,          // MENGINE_INT_10_10_2
	GL_UNSIGNED_INT_2_10_10_10_REV, // MENGINE_UINT_10_10_2
	GL_UNSIGNED_INT_10F_11F_11F_REV // MENGINE_FLOAT_11_11_10
};



Miracle::OpenGLTexture::OpenGLTexture(Texture* a_Texture, GLenum a_Target, GLenum a_TargetBinding)
	: OpenGLResource(a_Texture)
	, m_Target(a_Target)
	, m_TargetBinding(a_TargetBinding)
	, m_NumLevels(a_Texture->GetNumLevels())
	, m_InternalFormat(OpenGLTextureInternalFormat[a_Texture->GetDataFormat()])
	, m_ExternalFormat(OpenGLTextureExternalFormat[a_Texture->GetDataFormat()])
	, m_ExternalType(OpenGLTextureExternalType[DataFormatUtils::GetChannels(a_Texture->GetDataFormat())])
{

}

Miracle::OpenGLTexture::~OpenGLTexture()
{
}
